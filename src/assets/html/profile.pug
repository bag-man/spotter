extend ./header
include ./components

block content 
  div.header
    +search(author)
    button.copy(title='Copy markdown to clipboard')
      i.fa.fa-copy.fa-lg

  if !comments.length && !submissions.length && !words.length && !stats.length
    img(src="https://cataas.com/cat/computer/says/Hmm, this guy seems legit")
  else
    div.container
      if stats.length
        div.table-responsive
          table.table
            thead
              tr
                th.col-md-4 Subreddit
                th.col-md-4 Comments
                th.col-md-4 Submissions 
            tbody
              each subreddit in stats
                tr
                  td 
                    a(href=`/${author}/${subreddit.subreddit}`) #{subreddit.subreddit}
                  td #{subreddit.comments}
                  td #{subreddit.submissions}

      if words.length
        div.table-responsive
          table.table
            thead
              tr
                th.col-md-2 Word
                th.col-md-10 Used
            tbody
              each word in words
                tr
                  td 
                    a(href=`/${author}/word/${word.word}`) #{word.word}
                  td #{word.count}

      if submissions.length
        div.table-responsive
          table.table.comments
            thead
              tr
                th.col-md-2 Posted 
                th.comment.col-md-10 Submission
            tbody
              each submission in submissions
                tr
                  td #{submission.date.toISOString().slice(0,10)}
                  if submission.link
                    td.wrap
                      a(href='https://reddit.com' + submission.link) #{submission.title}
                  else
                    td.wrap #{submission.title}

      if comments.length
        div.table-responsive
          table.table.comments
            thead
              tr
                th.col-md-2 Posted 
                th.col-md-1 Subreddit
                th.comment.col-md-9 Comment
            tbody
              each comment in comments
                tr
                  td #{comment.date.toISOString().slice(0,10)}
                  td 
                    a(href='https://reddit.com/r/' + comment.subreddit) #{comment.subreddit}
                  if comment.link
                    td.wrap
                      a(href='https://reddit.com' + comment.link) #{comment.body}
                  else
                    td.wrap #{comment.body}

    pre.markdown #{markdown}
